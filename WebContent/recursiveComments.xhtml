<ui:composition lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core">


	<ui:decorate template="./templates/commentTemplate.xhtml">
		<ui:define name="votesAndScore">
			<h:form name="form">
				<h:commandLink styleClass="upVote" update=":form">
					<f:param name="id" value="#{entry.id}" />
					<f:ajax event="click" listener="#{entryBean.voteUp(entry.id)}"
						render="numberOfVotes" />
				</h:commandLink>
				<h:outputText styleClass="score" id="numberOfVotes"
					value="#{entry.score}" />
				<h:commandLink styleClass="downVote">
					<f:param name="id" value="#{entry.id}" />
					<f:ajax event="click" listener="#{entryBean.voteDown(entry.id)}"
						render="numberOfVotes" />
				</h:commandLink>
			</h:form>
		</ui:define>
		<ui:define name="commentDescription"> #{comment.createdString}</ui:define>
		<ui:define name="commentText"> #{comment.text}</ui:define>
	</ui:decorate>

	<c:choose>
		<c:when test="#{comment.hasComments}">
			<c:if test="#{comment.instanceOfComment}">
			#{userBean.raiseLeftMargin()}
		</c:if>
			<c:forEach items="#{comment.ratedByComments}" var="comment">
				<ui:include src="recursiveComments.xhtml" />
			</c:forEach>
		#{userBean.resetLeftMargin()}
	</c:when>
		<c:otherwise>

		</c:otherwise>
	</c:choose>

</ui:composition>